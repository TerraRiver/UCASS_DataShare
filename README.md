# UCASS DataShare

<div align="center">

# ğŸ“š UCASS DataShare - äººæ–‡ç¤¾ç§‘æ•°æ®åˆ†äº«å¹³å°

*ä¸“ä¸ºäººæ–‡ç¤¾ä¼šç§‘å­¦å®éªŒå®¤è®¾è®¡çš„å­¦æœ¯èµ„æºå…±äº«äº¤æµå¹³å°*

[![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue?logo=typescript)](https://www.typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-14-black?logo=next.js)](https://nextjs.org/)
[![Bun](https://img.shields.io/badge/Bun-1.0+-orange?logo=bun)](https://bun.sh/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue?logo=postgresql)](https://www.postgresql.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) â€¢ [API æ–‡æ¡£](#-api-æ–‡æ¡£)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**UCASS DataShare** æ˜¯ä¸€ä¸ªä¸“ä¸º**è®¡ç®—ç¤¾ä¼šç§‘å­¦ä¸å›½å®¶æ²»ç†å®éªŒå®¤**ï¼ˆUCASSï¼‰è®¾è®¡çš„å­¦æœ¯èµ„æºå…±äº«å¹³å°ï¼Œæ—¨åœ¨ä¿ƒè¿›äººæ–‡ç¤¾ä¼šç§‘å­¦é¢†åŸŸçš„æ•°æ®é›†å’Œæ¡ˆä¾‹é›†çš„å®‰å…¨å…±äº«ã€è§„èŒƒç®¡ç†å’Œåä½œä½¿ç”¨ã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **ğŸ“Š æ•°æ®é›†ç®¡ç†** - æ”¯æŒå¤šç§æ ¼å¼çš„æ•°æ®é›†ä¸Šä¼ ã€é¢„è§ˆå’Œä¸‹è½½
- **ğŸ“‘ æ¡ˆä¾‹é›†åˆ†äº«** - å­¦æœ¯æ¡ˆä¾‹çš„é›†ä¸­å±•ç¤ºå’Œäº¤æµ
- **ğŸ”— å…³ç³»å¯è§†åŒ–** - çŸ¥è¯†å›¾è°±å±•ç¤ºæ•°æ®é›†ä¸æ¡ˆä¾‹é›†çš„å…³è”å…³ç³»
- **ğŸ” å®¡æ ¸æœºåˆ¶** - å®Œå–„çš„å†…å®¹å®¡æ ¸å·¥ä½œæµï¼Œä¿è¯èµ„æºè´¨é‡
- **ğŸ“ˆ ç»Ÿè®¡åˆ†æ** - å¹³å°ä½¿ç”¨æƒ…å†µå’Œèµ„æºä¸‹è½½ç»Ÿè®¡

### ğŸŒŸ é€‚ç”¨åœºæ™¯

- ğŸ“ é«˜æ ¡å®éªŒå®¤æ•°æ®å…±äº«
- ğŸ”¬ ç§‘ç ”å›¢é˜Ÿå†…éƒ¨èµ„æºç®¡ç†
- ğŸ“š å­¦æœ¯ä¼šè®®èµ„æ–™åˆ†å‘
- ğŸŒ å¼€æ”¾æ•°æ®é›†å¹³å°

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å‰å°åŠŸèƒ½

#### 1. æ•°æ®é›†å‘ç°ä¸ç®¡ç†
- âœ… **å¤šæ ¼å¼æ”¯æŒ** - CSV, XLSX, PDF, æ–‡æœ¬ç­‰å¤šç§æ–‡ä»¶æ ¼å¼
- âœ… **æ•°æ®é¢„è§ˆ** - CSV/XLSX æ–‡ä»¶åœ¨çº¿é¢„è§ˆï¼ˆå‰ 50 è¡Œï¼‰
- âœ… **æ™ºèƒ½æœç´¢** - å…¨æ–‡æœç´¢ï¼ˆåç§°ã€ç®€è¿°ã€æ¥æºï¼‰
- âœ… **åˆ†ç±»ç­›é€‰** - 9 ä¸ªå­¦ç§‘åˆ†ç±»ï¼ˆæ”¿æ²»å­¦ã€ç»æµå­¦ã€ç¤¾ä¼šå­¦ç­‰ï¼‰
- âœ… **å¤šç»´æ’åº** - æœ€æ–°ä¸Šä¼ ã€ä¸‹è½½æœ€å¤šã€åç§°æ’åº
- âœ… **æ‰¹é‡ä¸‹è½½** - å•æ–‡ä»¶ä¸‹è½½æˆ–è‡ªåŠ¨æ‰“åŒ… ZIP
- âœ… **ä¸‹è½½ç»Ÿè®¡** - è‡ªåŠ¨è®°å½•ä¸‹è½½æ¬¡æ•°

#### 2. æ¡ˆä¾‹é›†åˆ†äº«
- âœ… **æ¡ˆä¾‹å±•ç¤º** - æ ‡é¢˜ã€ä½œè€…ã€å‘è¡¨ä¿¡æ¯ã€å­¦ç§‘åˆ†ç±»
- âœ… **è§†é¢‘æ”¯æŒ** - åœ¨çº¿æ’­æ”¾è§†é¢‘æ–‡ä»¶ï¼ˆæ”¯æŒæ‹–åŠ¨ï¼‰
- âœ… **å…³è”æ•°æ®é›†** - æ¡ˆä¾‹é›†ä¸æ•°æ®é›†çš„åŒå‘å…³è”
- âœ… **å®è·µåŠŸèƒ½** - æ”¯æŒå®è·µé“¾æ¥å’Œèµ„æº
- âœ… **ç²¾é€‰æ ‡è®°** - ä¼˜è´¨æ¡ˆä¾‹æ¨è

#### 3. çŸ¥è¯†å›¾è°±æ¢ç´¢
- âœ… **åŠ›å¯¼å‘å›¾** - äº¤äº’å¼å…³ç³»ç½‘ç»œå¯è§†åŒ–
- âœ… **èŠ‚ç‚¹ç­›é€‰** - æŒ‰ç±»å‹ï¼ˆæ•°æ®é›†/æ¡ˆä¾‹é›†ï¼‰è¿‡æ»¤
- âœ… **æ™ºèƒ½å¸ƒå±€** - èŠ‚ç‚¹å¤§å°æ ¹æ®ä¸‹è½½é‡åŠ¨æ€è°ƒæ•´
- âœ… **è¯¦æƒ…æŸ¥çœ‹** - ç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹å®Œæ•´ä¿¡æ¯
- âœ… **ç¼©æ”¾æ§åˆ¶** - æ”¾å¤§ã€ç¼©å°ã€é€‚åº”å±å¹•

#### 4. ç”¨æˆ·ä¸Šä¼ 
- âœ… **å¤šæ–‡ä»¶ä¸Šä¼ ** - æœ€å¤š 10 ä¸ªæ–‡ä»¶ï¼Œå•ä¸ªæœ€å¤§ 10GB
- âœ… **å…ƒæ•°æ®å¡«å†™** - æ¥æºã€ç®€è¿°ã€å¼•ç”¨æ–‡çŒ®ç­‰
- âœ… **æ‹–æ‹½ä¸Šä¼ ** - æ”¯æŒæ‹–æ‹½æ–‡ä»¶ä¸Šä¼ 
- âœ… **è¿›åº¦æ˜¾ç¤º** - ä¸Šä¼ è¿›åº¦å®æ—¶åé¦ˆ

### åå°ç®¡ç†åŠŸèƒ½

#### 1. ç®¡ç†ä»ªè¡¨ç›˜
- âœ… **ç»Ÿè®¡æ€»è§ˆ** - æ•°æ®é›†ã€æ¡ˆä¾‹é›†ã€ä¸‹è½½é‡ç»Ÿè®¡
- âœ… **åˆ†ç±»åˆ†å¸ƒ** - å¯è§†åŒ–å›¾è¡¨å±•ç¤º
- âœ… **å¿«é€Ÿå…¥å£** - å¾…å®¡æ ¸é¡¹ç›®å¿«é€Ÿè®¿é—®

#### 2. å†…å®¹å®¡æ ¸
- âœ… **å®¡æ ¸å·¥ä½œæµ** - ä¸Šä¼  â†’ å¾…å®¡æ ¸ â†’ æ‰¹å‡†/æ‹’ç»
- âœ… **çŠ¶æ€ç®¡ç†** - å¯è§æ€§ã€ç²¾é€‰ã€é¢„è§ˆç­‰çŠ¶æ€åˆ‡æ¢
- âœ… **æ‰¹é‡æ“ä½œ** - æ‰¹é‡å®¡æ ¸ã€åˆ é™¤

#### 3. å…³ç³»ç®¡ç†
- âœ… **å¯è§†åŒ–ç¼–è¾‘** - å›¾å½¢åŒ–ç®¡ç†æ•°æ®é›†ä¸æ¡ˆä¾‹é›†å…³ç³»
- âœ… **æ‰¹é‡åˆ›å»º** - ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªå…³è”
- âœ… **å…³ç³»åˆ é™¤** - ç§»é™¤ä¸ç›¸å…³çš„å…³è”

#### 4. è´¦å·ç®¡ç†
- âœ… **ç®¡ç†å‘˜ç®¡ç†** - åˆ›å»ºã€åˆ é™¤ç®¡ç†å‘˜è´¦å·
- âœ… **JWT è®¤è¯** - å®‰å…¨çš„èº«ä»½éªŒè¯æœºåˆ¶
- âœ… **å¯†ç åŠ å¯†** - bcrypt åŠ å¯†å­˜å‚¨

---

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Bun** | 1.0+ | é«˜æ€§èƒ½ JavaScript è¿è¡Œæ—¶ |
| **Express** | 4.18+ | Web åº”ç”¨æ¡†æ¶ |
| **TypeScript** | 5.3+ | ç±»å‹å®‰å…¨çš„å¼€å‘è¯­è¨€ |
| **Prisma** | 5.7+ | ç°ä»£åŒ– ORM |
| **PostgreSQL** | 15+ | å…³ç³»å‹æ•°æ®åº“ |
| **JWT** | 9.0+ | èº«ä»½éªŒè¯ |
| **Multer** | 1.4+ | æ–‡ä»¶ä¸Šä¼ å¤„ç† |
| **Archiver** | 7.0+ | ZIP æ–‡ä»¶å‹ç¼© |
| **xlsx** | 0.18+ | Excel æ–‡ä»¶å¤„ç† |

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Next.js** | 14+ | React æ¡†æ¶ï¼ˆSSR/SSGï¼‰ |
| **React** | 18+ | UI åº“ |
| **TypeScript** | 5.3+ | ç±»å‹å®‰å…¨ |
| **NextUI** | 2.6+ | UI ç»„ä»¶åº“ |
| **Tailwind CSS** | 3.3+ | åŸå­åŒ– CSS |
| **SWR** | 2.2+ | æ•°æ®è·å–å’Œç¼“å­˜ |
| **Recharts** | 3.0+ | å›¾è¡¨å¯è§†åŒ– |
| **react-force-graph-2d** | 1.29+ | çŸ¥è¯†å›¾è°± |
| **Framer Motion** | 12+ | åŠ¨ç”»åº“ |

### å¼€å‘å·¥å…·

- **Monorepo** - å‰åç«¯ç»Ÿä¸€ç®¡ç†
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **PM2** - è¿›ç¨‹ç®¡ç†ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- **Nginx** - åå‘ä»£ç†ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
UCASS_DataShare/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api-backend/              # åç«¯ API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts   # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ env.ts        # ç¯å¢ƒå˜é‡
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts       # èº«ä»½éªŒè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logger.ts     # æ—¥å¿—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ errorHandler.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/           # API è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts       # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ datasets.ts   # æ•°æ®é›†æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ casestudies.ts # æ¡ˆä¾‹é›†æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ admin.ts      # ç®¡ç†æ¥å£
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ relationships.ts # å…³ç³»æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ seed.ts           # ç§å­æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”‚   â””â”€â”€ schema.prisma     # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â””â”€â”€ web-frontend/             # å‰ç«¯ Web åº”ç”¨
â”‚       â”œâ”€â”€ app/
â”‚       â”‚   â”œâ”€â”€ (main)/           # å‰å°é¡µé¢
â”‚       â”‚   â”‚   â”œâ”€â”€ page.tsx      # é¦–é¡µ
â”‚       â”‚   â”‚   â”œâ”€â”€ discover/     # æ•°æ®å‘ç°
â”‚       â”‚   â”‚   â”œâ”€â”€ datasets/     # æ•°æ®é›†è¯¦æƒ…
â”‚       â”‚   â”‚   â”œâ”€â”€ casestudies/  # æ¡ˆä¾‹é›†åˆ—è¡¨
â”‚       â”‚   â”‚   â”œâ”€â”€ upload/       # ä¸Šä¼ æ•°æ®é›†
â”‚       â”‚   â”‚   â”œâ”€â”€ upload-casestudy/ # ä¸Šä¼ æ¡ˆä¾‹é›†
â”‚       â”‚   â”‚   â””â”€â”€ explore/      # çŸ¥è¯†å›¾è°±
â”‚       â”‚   â”œâ”€â”€ admin/            # åå°ç®¡ç†é¡µé¢
â”‚       â”‚   â”‚   â”œâ”€â”€ login/        # ç™»å½•
â”‚       â”‚   â”‚   â”œâ”€â”€ dashboard/    # ä»ªè¡¨ç›˜
â”‚       â”‚   â”‚   â”œâ”€â”€ datasets/     # æ•°æ®é›†ç®¡ç†
â”‚       â”‚   â”‚   â”œâ”€â”€ casestudies/  # æ¡ˆä¾‹é›†ç®¡ç†
â”‚       â”‚   â”‚   â””â”€â”€ relationships/ # å…³ç³»ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ layout.tsx        # æ ¹å¸ƒå±€
â”‚       â”‚   â””â”€â”€ globals.css       # å…¨å±€æ ·å¼
â”‚       â”œâ”€â”€ components/           # ç»„ä»¶
â”‚       â”œâ”€â”€ config/               # é…ç½®
â”‚       â”œâ”€â”€ lib/                  # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ next.config.js
â”‚       â””â”€â”€ tailwind.config.js
â”‚
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ backup.sh                 # Linux å¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ restore.sh                # Linux æ¢å¤è„šæœ¬
â”‚   â”œâ”€â”€ backup.bat                # Windows å¤‡ä»½è„šæœ¬
â”‚   â”œâ”€â”€ restore.bat               # Windows æ¢å¤è„šæœ¬
â”‚   â””â”€â”€ README.md                 # è„šæœ¬ä½¿ç”¨æ–‡æ¡£
â”‚
â”œâ”€â”€ uploads/                      # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ backups/                      # å¤‡ä»½ç›®å½•
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json                  # Monorepo é…ç½®
â”œâ”€â”€ éƒ¨ç½²æŒ‡å—-å®å¡”é¢æ¿.md          # éƒ¨ç½²æ–‡æ¡£
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

---

## âš™ï¸ ç¯å¢ƒè¦æ±‚

### å¼€å‘ç¯å¢ƒ

- **Node.js** >= 18.0.0 æˆ– **Bun** >= 1.0.0
- **PostgreSQL** >= 15.0
- **Git**
- 8GB+ RAMï¼ˆæ¨èï¼‰
- 20GB+ ç£ç›˜ç©ºé—´

### ç”Ÿäº§ç¯å¢ƒ

- **Ubuntu** 20.04+ æˆ–å…¶ä»– Linux å‘è¡Œç‰ˆ
- **PostgreSQL** 15+
- **Nginx** (å¯é€‰ï¼Œç”¨äºåå‘ä»£ç†)
- **PM2** (å¯é€‰ï¼Œç”¨äºè¿›ç¨‹ç®¡ç†)
- 16GB+ RAMï¼ˆæ¨èï¼‰
- 100GB+ ç£ç›˜ç©ºé—´

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-org/ucass-datashare.git
cd ucass-datashare
```

### 2. å®‰è£…ä¾èµ–

#### ä½¿ç”¨ Bunï¼ˆæ¨èï¼‰

```bash
# å®‰è£… Bun
curl -fsSL https://bun.sh/install | bash

# å®‰è£…é¡¹ç›®ä¾èµ–
bun install
```

#### ä½¿ç”¨ npm

```bash
npm install
```

### 3. é…ç½®æ•°æ®åº“

#### å®‰è£… PostgreSQL

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
```

**macOS:**
```bash
brew install postgresql@15
brew services start postgresql@15
```

**Windows:**
ä¸‹è½½å®‰è£…: https://www.postgresql.org/download/windows/

#### åˆ›å»ºæ•°æ®åº“

```bash
# è¿æ¥åˆ° PostgreSQL
sudo -u postgres psql

# åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
CREATE DATABASE ucass_datashare;
CREATE USER ucass_datashare WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE ucass_datashare TO ucass_datashare;
\q
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

#### åç«¯é…ç½®

åˆ›å»º `apps/api-backend/.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://ucass_datashare:your_secure_password@localhost:5432/ucass_datashare"

# æœåŠ¡é…ç½®
PORT=30002
NODE_ENV=development

# JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨å¼ºéšæœºå¯†é’¥ï¼‰
JWT_SECRET="your-secret-key-change-in-production"

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10737418240  # 10GB

# ç®¡ç†å‘˜åˆå§‹è´¦å·
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
```

#### å‰ç«¯é…ç½®

åˆ›å»º `apps/web-frontend/.env` æ–‡ä»¶ï¼š

```env
# API åœ°å€
NEXT_PUBLIC_API_URL=http://localhost:30002

# æœåŠ¡ç«¯å£
PORT=30001
```

### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
cd apps/api-backend

# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
bun run db:generate

# æ¨é€æ•°æ®åº“ schemaï¼ˆåˆ›å»ºè¡¨ï¼‰
bun run db:push

# åˆå§‹åŒ–ç§å­æ•°æ®ï¼ˆåˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼‰
bun run db:seed
```

### 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

#### å¯åŠ¨åç«¯

```bash
cd apps/api-backend
bun run dev
```

åç«¯æœåŠ¡å°†åœ¨ http://localhost:30002 å¯åŠ¨

#### å¯åŠ¨å‰ç«¯

```bash
cd apps/web-frontend
bun run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ http://localhost:30001 å¯åŠ¨

### 7. è®¿é—®åº”ç”¨

| é¡µé¢ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| é¦–é¡µ | http://localhost:30001 | å¹³å°é¦–é¡µ |
| æ•°æ®å‘ç° | http://localhost:30001/discover | æµè§ˆæ•°æ®é›† |
| æ¡ˆä¾‹é›† | http://localhost:30001/casestudies | æµè§ˆæ¡ˆä¾‹é›† |
| çŸ¥è¯†å›¾è°± | http://localhost:30001/explore | å…³ç³»å¯è§†åŒ– |
| ç®¡ç†åå° | http://localhost:30001/admin/login | ç®¡ç†å‘˜ç™»å½• |

### 8. é»˜è®¤ç®¡ç†å‘˜è´¦å·

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

âš ï¸ **é‡è¦**: é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼

---

## ğŸ“¦ ç”Ÿäº§ç¯å¢ƒæ„å»º

### æ„å»ºåç«¯

```bash
cd apps/api-backend
bun run build
```

### æ„å»ºå‰ç«¯

```bash
cd apps/web-frontend
bun run build
```

### å¯åŠ¨ç”Ÿäº§æœåŠ¡

#### åç«¯

```bash
cd apps/api-backend
bun start
```

#### å‰ç«¯

```bash
cd apps/web-frontend
bun start
```

---

## ğŸŒ éƒ¨ç½²æŒ‡å—

### æ–¹å¼ 1: å®å¡”é¢æ¿éƒ¨ç½²ï¼ˆæ¨èï¼‰

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒï¼š[éƒ¨ç½²æŒ‡å—-å®å¡”é¢æ¿.md](./éƒ¨ç½²æŒ‡å—-å®å¡”é¢æ¿.md)

**ä¸»è¦æ­¥éª¤ï¼š**
1. å®‰è£…å®å¡”é¢æ¿
2. å®‰è£… Bunã€PostgreSQLã€Nginx
3. é…ç½®æ•°æ®åº“å’Œç¯å¢ƒå˜é‡
4. ä¸Šä¼ ä»£ç å¹¶æ„å»º
5. é…ç½® Nginx åå‘ä»£ç†
6. ä½¿ç”¨ PM2 å®ˆæŠ¤è¿›ç¨‹
7. é…ç½® SSL è¯ä¹¦

### æ–¹å¼ 2: æ‰‹åŠ¨éƒ¨ç½² (Ubuntu)

#### 1. å®‰è£…ä¾èµ–

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Bun
curl -fsSL https://bun.sh/install | bash

# å®‰è£… PostgreSQL
sudo apt install postgresql postgresql-contrib

# å®‰è£… Nginx
sudo apt install nginx

# å®‰è£… PM2
npm install -g pm2
```

#### 2. é…ç½®æ•°æ®åº“

```bash
sudo -u postgres psql
CREATE DATABASE ucass_datashare;
CREATE USER ucass_datashare WITH PASSWORD 'secure_password';
GRANT ALL PRIVILEGES ON DATABASE ucass_datashare TO ucass_datashare;
\q
```

#### 3. ä¸Šä¼ ä»£ç 

```bash
# å…‹éš†åˆ°æœåŠ¡å™¨
cd /var/www
git clone https://github.com/your-org/ucass-datashare.git
cd ucass-datashare

# å®‰è£…ä¾èµ–
bun install

# é…ç½®ç¯å¢ƒå˜é‡
cp apps/api-backend/.env.example apps/api-backend/.env
cp apps/web-frontend/.env.example apps/web-frontend/.env
# ç¼–è¾‘ .env æ–‡ä»¶...

# åˆå§‹åŒ–æ•°æ®åº“
cd apps/api-backend
bun run db:generate
bun run db:push
bun run db:seed

# æ„å»º
cd ../..
bun run build
```

#### 4. é…ç½® PM2

```bash
# å¯åŠ¨åç«¯
cd /var/www/ucass-datashare/apps/api-backend
pm2 start "bun src/index.ts" --name ucass-api

# å¯åŠ¨å‰ç«¯
cd /var/www/ucass-datashare/apps/web-frontend
pm2 start "bun start" --name ucass-web

# ä¿å­˜é…ç½®
pm2 save
pm2 startup
```

#### 5. é…ç½® Nginx

åˆ›å»º `/etc/nginx/sites-available/ucass-datashare`ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯
    location / {
        proxy_pass http://localhost:30001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # API
    location /api {
        proxy_pass http://localhost:30002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        client_max_body_size 10G;
    }
}
```

```bash
# å¯ç”¨é…ç½®
sudo ln -s /etc/nginx/sites-available/ucass-datashare /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

#### 6. é…ç½® SSL (å¯é€‰)

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

---

## ğŸ’¾ å¤‡ä»½ä¸æ¢å¤

é¡¹ç›®æä¾›äº†å®Œæ•´çš„ä¸€é”®å¤‡ä»½å’Œæ¢å¤è„šæœ¬ï¼Œæ”¯æŒ Windows å’Œ Linuxã€‚

### å¤‡ä»½

å¤‡ä»½åŒ…å«ï¼š
- PostgreSQL æ•°æ®åº“å®Œæ•´è½¬å‚¨
- uploads/ ç›®å½•æ‰€æœ‰æ–‡ä»¶
- å¤‡ä»½å…ƒæ•°æ®ä¿¡æ¯

#### Linux/Ubuntu

```bash
cd scripts
chmod +x backup.sh
./backup.sh
```

#### Windows

```cmd
cd scripts
backup.bat
```

### æ¢å¤

#### Linux/Ubuntu

```bash
cd scripts
./restore.sh ucass_backup_20250110_143000
```

#### Windows

```cmd
cd scripts
restore.bat ucass_backup_20250110_143000
```

### å®šæ—¶è‡ªåŠ¨å¤‡ä»½

#### Linux (cron)

```bash
# æ¯å¤©å‡Œæ™¨ 2 ç‚¹è‡ªåŠ¨å¤‡ä»½
crontab -e
# æ·»åŠ ï¼š
0 2 * * * cd /var/www/ucass-datashare && ./scripts/backup.sh >> /var/log/ucass-backup.log 2>&1
```

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[scripts/README.md](./scripts/README.md)

---

## ğŸ“š API æ–‡æ¡£

### è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| POST | `/api/auth/login` | ç®¡ç†å‘˜ç™»å½• | å…¬å¼€ |
| POST | `/api/auth/logout` | ç®¡ç†å‘˜ç™»å‡º | éœ€è®¤è¯ |
| GET | `/api/auth/check` | æ£€æŸ¥ç™»å½•çŠ¶æ€ | éœ€è®¤è¯ |

### æ•°æ®é›†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/datasets/public` | è·å–å…¬å¼€æ•°æ®é›†åˆ—è¡¨ | å…¬å¼€ |
| GET | `/api/datasets/:id` | è·å–æ•°æ®é›†è¯¦æƒ… | å…¬å¼€ |
| POST | `/api/datasets/upload` | ä¸Šä¼ æ•°æ®é›† | å…¬å¼€ |
| GET | `/api/datasets/:id/preview/:fileId` | é¢„è§ˆæ•°æ®æ–‡ä»¶ | å…¬å¼€ |
| GET | `/api/datasets/:id/download/:fileId` | ä¸‹è½½å•ä¸ªæ–‡ä»¶ | å…¬å¼€ |
| POST | `/api/datasets/:id/download/zip` | æ‰¹é‡ä¸‹è½½ï¼ˆZIPï¼‰ | å…¬å¼€ |
| GET | `/api/datasets/categories` | è·å–åˆ†ç±»åˆ—è¡¨ | å…¬å¼€ |
| GET | `/api/datasets/stats` | å¹³å°ç»Ÿè®¡ä¿¡æ¯ | å…¬å¼€ |

### æ¡ˆä¾‹é›†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/casestudies` | è·å–æ¡ˆä¾‹é›†åˆ—è¡¨ | å…¬å¼€ |
| GET | `/api/casestudies/:id` | è·å–æ¡ˆä¾‹é›†è¯¦æƒ… | å…¬å¼€ |
| POST | `/api/casestudies/upload` | ä¸Šä¼ æ¡ˆä¾‹é›† | å…¬å¼€ |
| GET | `/api/casestudies/:id/download` | ä¸‹è½½æ¡ˆä¾‹é›†ï¼ˆZIPï¼‰ | å…¬å¼€ |

### ç®¡ç†æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/admin/datasets` | è·å–æ‰€æœ‰æ•°æ®é›† | ç®¡ç†å‘˜ |
| PUT | `/api/admin/datasets/:id` | æ›´æ–°æ•°æ®é›† | ç®¡ç†å‘˜ |
| PUT | `/api/admin/datasets/:id/review` | å®¡æ ¸æ•°æ®é›† | ç®¡ç†å‘˜ |
| DELETE | `/api/admin/datasets/:id` | åˆ é™¤æ•°æ®é›† | ç®¡ç†å‘˜ |
| GET | `/api/admin/casestudies` | è·å–æ‰€æœ‰æ¡ˆä¾‹é›† | ç®¡ç†å‘˜ |
| PUT | `/api/admin/casestudies/:id` | æ›´æ–°æ¡ˆä¾‹é›† | ç®¡ç†å‘˜ |
| DELETE | `/api/admin/casestudies/:id` | åˆ é™¤æ¡ˆä¾‹é›† | ç®¡ç†å‘˜ |
| GET | `/api/admin/stats` | è·å–ç»Ÿè®¡æ•°æ® | ç®¡ç†å‘˜ |

### å…³ç³»æ¥å£

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/api/relationships/graph` | è·å–å…³ç³»å›¾æ•°æ® | å…¬å¼€ |
| POST | `/api/relationships` | åˆ›å»ºå…³ç³» | ç®¡ç†å‘˜ |
| DELETE | `/api/relationships/:id` | åˆ é™¤å…³ç³» | ç®¡ç†å‘˜ |

å®Œæ•´ API æ–‡æ¡£ï¼šå‚è€ƒä»£ç ä¸­çš„è·¯ç”±æ–‡ä»¶

---

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…å¡« |
|--------|------|--------|------|
| `DATABASE_URL` | PostgreSQL è¿æ¥å­—ç¬¦ä¸² | - | âœ… |
| `PORT` | æœåŠ¡ç«¯å£ | 3001 | âŒ |
| `NODE_ENV` | è¿è¡Œç¯å¢ƒ | development | âŒ |
| `JWT_SECRET` | JWT å¯†é’¥ | - | âœ… |
| `UPLOAD_DIR` | ä¸Šä¼ ç›®å½• | ./uploads | âŒ |
| `MAX_FILE_SIZE` | æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ | 1073741824 (1GB) | âŒ |
| `ADMIN_USERNAME` | åˆå§‹ç®¡ç†å‘˜ç”¨æˆ·å | admin | âŒ |
| `ADMIN_PASSWORD` | åˆå§‹ç®¡ç†å‘˜å¯†ç  | admin123 | âŒ |

### å‰ç«¯ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ | å¿…å¡« |
|--------|------|--------|------|
| `NEXT_PUBLIC_API_URL` | API åŸºç¡€åœ°å€ | http://localhost:30002 | âŒ |
| `PORT` | æœåŠ¡ç«¯å£ | 30001 | âŒ |

### æ•°æ®åº“ Schema

è¯¦ç»†çš„æ•°æ®åº“æ¨¡å‹å®šä¹‰è¯·å‚è€ƒï¼š`apps/api-backend/prisma/schema.prisma`

**ä¸»è¦è¡¨ï¼š**
- `AdminUser` - ç®¡ç†å‘˜ç”¨æˆ·
- `Dataset` - æ•°æ®é›†
- `DatasetFile` - æ•°æ®é›†æ–‡ä»¶
- `CaseStudy` - æ¡ˆä¾‹é›†
- `CaseStudyFile` - æ¡ˆä¾‹é›†æ–‡ä»¶
- `CaseStudyDataset` - æ¡ˆä¾‹é›†ä¸æ•°æ®é›†å…³ç³»

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯:** `Error: Can't reach database server`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œ
sudo systemctl status postgresql

# å¯åŠ¨ PostgreSQL
sudo systemctl start postgresql

# æ£€æŸ¥è¿æ¥
psql -h localhost -U ucass_datashare -d ucass_datashare
```

#### 2. ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯:** `Error: listen EADDRINUSE: address already in use :::30002`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :30002  # Linux/Mac
netstat -ano | findstr :30002  # Windows

# æ€æ­»è¿›ç¨‹æˆ–æ›´æ”¹ .env ä¸­çš„ PORT
```

#### 3. Prisma å®¢æˆ·ç«¯æœªç”Ÿæˆ

**é”™è¯¯ä¿¡æ¯:** `Cannot find module '@prisma/client'`

**è§£å†³æ–¹æ¡ˆ:**
```bash
cd apps/api-backend
bun run db:generate
```

#### 4. å‰ç«¯æ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯:** `Type error: ...`

**è§£å†³æ–¹æ¡ˆ:**
```bash
# æ¸…ç†ç¼“å­˜
cd apps/web-frontend
rm -rf .next node_modules
bun install
bun run build
```

#### 5. æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**å¯èƒ½åŸå› :**
- æ–‡ä»¶è¶…è¿‡å¤§å°é™åˆ¶
- ä¸Šä¼ ç›®å½•æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ:**
```bash
# å¢åŠ ä¸Šä¼ å¤§å°é™åˆ¶ï¼ˆ.envï¼‰
MAX_FILE_SIZE=10737418240  # 10GB

# è®¾ç½®ç›®å½•æƒé™
chmod 755 uploads/
chown -R your-user:your-user uploads/
```

### è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—](./éƒ¨ç½²æŒ‡å—-å®å¡”é¢æ¿.md)
- ğŸ“– æŸ¥çœ‹ [å¤‡ä»½æ–‡æ¡£](./scripts/README.md)
- ğŸ› æäº¤ Issue: [GitHub Issues](https://github.com/your-org/ucass-datashare/issues)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

- **ä»£ç é£æ ¼**: éµå¾ª ESLint å’Œ Prettier é…ç½®
- **æäº¤ä¿¡æ¯**: ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
- **ç±»å‹æ£€æŸ¥**: ç¡®ä¿ TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- **æµ‹è¯•**: æ·»åŠ å¿…è¦çš„æµ‹è¯•ï¼ˆå¦‚æœ‰ï¼‰

### åˆ†æ”¯è¯´æ˜

- `main` - ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- `develop` - å¼€å‘åˆ†æ”¯
- `feature/*` - æ–°åŠŸèƒ½åˆ†æ”¯
- `fix/*` - Bug ä¿®å¤åˆ†æ”¯

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## ğŸ‘¥ å›¢é˜Ÿ

**è®¡ç®—ç¤¾ä¼šç§‘å­¦ä¸å›½å®¶æ²»ç†å®éªŒå®¤ (UCASS)**

---

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®ä½¿ç”¨äº†ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Bun](https://bun.sh/) - JavaScript è¿è¡Œæ—¶
- [Prisma](https://www.prisma.io/) - ORM å·¥å…·
- [NextUI](https://nextui.org/) - UI ç»„ä»¶åº“
- [Tailwind CSS](https://tailwindcss.com/) - CSS æ¡†æ¶
- [Recharts](https://recharts.org/) - å›¾è¡¨åº“
- [react-force-graph](https://github.com/vasturiano/react-force-graph) - å›¾è°±å¯è§†åŒ–

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…ï¼

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub](https://github.com/your-org/ucass-datashare)
- é‚®ç®±: support@ucass.edu.cn
- å®˜ç½‘: https://ucass.edu.cn

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#ucass-datashare)**

Made with â¤ï¸ by UCASS Team

</div>
